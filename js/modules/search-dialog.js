const client=new AddSearchClient("2651a9f9545535cb82cf902c4727759e");client.setThrottleTime(0),client.setLanguage(document.documentElement.lang||"en");let conf={baseFilters:searchSettingsCommon.baseFilters};const searchui=new AddSearchUI(client,conf),searchResultsPlaceholder=`<ul class="c-search-dialog-try">${searchDialogData.searchResultsPlaceholder.queries.map(e=>`<li class="c-search-dialog-try-item">${e}</li>`).join("")}</ul>`,hasSavedSearches=()=>{const e=window.localStorage.getItem("storedSearches");return e&&JSON.parse(e).length>0},SEARCHRESULTS_TEMPLATE=`\n  <div class="c-search-dialog-results addsearch-searchresults">\n    {{#if resultcount}}\n      <h3 class="c-search-dialog-results-title">${searchDialogData.searchResults.title}</h3>\n    {{else}}\n      <h3 id="searchDialogResultsPlaceholderTitle" class="c-search-dialog-results-title">\n        ${hasSavedSearches()?searchDialogData.recentSearchesTitle:searchDialogData.searchResultsPlaceholder.title}\n      </h3>\n      <div id="searchDialogResultsPlaceholder" class="c-search-dialog-results-placeholder">\n        ${hasSavedSearches()?JSON.parse(window.localStorage.getItem("storedSearches")).pop().join(""):searchResultsPlaceholder}\n      </div>\n    {{/if}}\n\n    <table class="c-search-dialog-results-table">\n      {{#each (limit hits 5)}}\n        <tr class="c-search-dialog-result{{#equals type "PROMOTED"}} promoted{{/equals}}">\n          <td class="c-search-dialog-result-content">\n            <h3 class="c-search-dialog-result-title">\n              <a href="{{url}}" data-analytics-click="{{id}}">{{trimTitle title}}</a>\n            </h3>\n            <div class="c-search-dialog-result-text">\n              {{{highlight}}}{{#not type "PROMOTED"}}&#8230;{{/not}}\n            </div>\n          </td>\n          <td class="c-search-dialog-result-category">\n            {{#gt categories.length 1}}\n              {{buildCategoryTag ../categories}}\n              <div class="c-search-dialog-result-category__secondary">{{buildCategoryTag ../categories true}}</div>\n            {{else}}\n              All\n            {{/gt}}\n          </td>\n        </tr>\n      {{/each}}\n    </table>\n  </div>\n  {{#if resultcount}}\n    <div class="c-search-dialog-allresults">\n      <a href="/search-results/?search={{ keyword }}">${searchDialogData.searchResults.resultsPageLink}</a>\n    </div>\n  {{/if}}\n`,FILTERS_TABS_TEMPLATE='\n  <div class="c-search-dialog-filters">\n    <ul class="c-search-dialog-filters-list">\n      {{#each options}}\n        <li data-filter="{{@key}}" class="c-tags__filter c-mute-link{{#if active}} active{{/if}}">{{label}}</li>\n      {{/each}}\n    </ul>\n  </div>\n';searchui.registerHandlebarsHelper("limit",searchSettingsCommon.handlebarsHelpers.limit),searchui.registerHandlebarsHelper("buildCategoryTag",searchSettingsCommon.handlebarsHelpers.buildCategoryTag),searchui.registerHandlebarsHelper("trimTitle",searchSettingsCommon.handlebarsHelpers.trimTitle);const saveSearches=()=>{if(window.cookiesP&&window.localStorage){const e=document.querySelectorAll(".c-search-dialog-results-table .c-search-dialog-result"),a=e.length>0?Array.from(e).map(e=>e.outerHTML):"",s=window.localStorage.getItem("storedSearches"),t=s?JSON.parse(s):[];a&&t.push(a),window.localStorage.setItem("storedSearches",JSON.stringify(t)),showSavedSearches()}},showSavedSearches=()=>{const e=document.getElementById("searchDialogResultsPlaceholderTitle"),a=document.getElementById("searchDialogResultsPlaceholder");if(hasSavedSearches()&&e&&a){const s=JSON.parse(window.localStorage.getItem("storedSearches"));e.textContent=searchDialogData.recentSearchesTitle,a.innerHTML=`<table class="c-search-dialog-results-placeholder">${s.pop().join("")}</table>`}};searchui.searchField({containerId:"searchfield-container",placeholder:searchDialogData.searchfieldPlaceholder,icon:!0,button:"Search",searchAsYouType:!0,ignoreAutocomplete:!0,minLengthToShowResults:2}),searchui.filters({containerId:"tabs",type:AddSearchUI.FILTER_TYPE.TABS,template:FILTERS_TABS_TEMPLATE,clearOtherFilters:!0,options:searchSettingsCommon.filters}),searchui.searchResults({containerId:"searchresults-container",template:SEARCHRESULTS_TEMPLATE,renderCompleteCallback:saveSearches}),searchui.start();const searchEmpty=()=>{hasSavedSearches()?showSavedSearches():document.querySelector(".c-search-dialog-results").addEventListener("click",e=>{e.target.classList.contains("c-search-dialog-try-item")&&searchui.search(e.target.textContent)})};searchEmpty();const searchfield=document.querySelector("#searchfield-container input"),searchfieldInput=()=>{0==searchfield.value.length&&(searchui.clear(),searchEmpty())};searchfield.addEventListener("input",searchfieldInput);const searchDialogButton=document.getElementById("main-menu-top-search"),searchDialog=document.getElementById("searchDialog");searchDialog.addEventListener("show.bs.modal",()=>{searchDialogButton.classList.add("active")}),searchDialog.addEventListener("hide.bs.modal",()=>{searchDialogButton.classList.remove("active")});