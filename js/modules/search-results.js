const client=new AddSearchClient("2651a9f9545535cb82cf902c4727759e"),backgroundClient=new AddSearchClient("2651a9f9545535cb82cf902c4727759e");client.setThrottleTime(0),client.setLanguage(document.documentElement.lang||"en");let conf={baseFilters:searchSettingsCommon.baseFilters};const searchui=new AddSearchUI(client,conf),keyboardThreshold=1e3;let keyboardTimer,filterChangeTrigger=!1,filtersCache={};const SEARCHRESULTS_TEMPLATE=`\n    <div class="p-search-results addsearch-searchresults">\n        {{#if resultcount}}\n            <div class="p-search-results-title">${searchResultsData.resultsTitle}</div>\n        {{/if}}\n\n        {{#each hits}}\n            <a href="{{url}}" data-analytics-click="{{id}}" class="p-search-result hit{{#equals type "PROMOTED"}} promoted{{/equals}}">\n                <div class="p-search-result-content">\n                    <div class="p-search-result-category category">\n                      {{#gt categories.length 1}}\n                        {{buildCategoryTag ../categories}}\n                        <div class="p-search-result-category__secondary">{{buildCategoryTag ../categories true}}</div>\n                      {{else}}\n                        All\n                      {{/gt}}\n                    </div>\n                    <h3 class="p-search-result-title">\n                      {{#if title}} {{trimTitle title}} {{else}} {{removeTrailingQueriesFromUrl url}} {{/if}}\n                    </h3>\n                    <div class="p-search-result-text highlight">\n                        {{{highlight}}}{{#not type "PROMOTED"}}&#8230;{{/not}}\n                    </div>\n                </div>\n                <div class="p-search-result-image d-none d-lg-block">\n                    {{> searchResultImageTemplate}}\n                </div>\n            </a>\n        {{/each}}\n    </div>\n`,LOADMORE_TEMPLATE=`\n    <div class="p-search-loadmore addsearch-loadmore">\n        {{#if isLoading}}\n            {{#gt totalHits 0}}\n                <span>Loading more..</span>\n            {{/gt}}\n        {{else if hasMorePages}}\n            <button class="p-search-loadmore-button">\n                <span>Showing 1 - <span id="numberofresults"></span> of {{totalHits}}</span>\n                <span class="p-search-loadmore-text">${searchResultsData.loadMore}</span>\n            </button>\n        {{/if}}\n    </div>\n`,NUMBER_OF_RESULTS_TEMPLATE='\n  <div class="number-of-results">\n    {{total_hits}}{{#equals total_hits 10000}}+{{/equals}} results for <em>{{keyword}}</em>\n  </div>\n',FILTERS_TABS_TEMPLATE='\n  <div class="p-search-filters">\n    <ul class="p-search-filters-list">\n      {{#each options}}\n        <li id="searchfilter-{{@key}}" data-filter="{{@key}}" class="c-tags__filter c-mute-link{{#if active}} active{{/if}}">\n          {{label}}\n          <span class="searchfilter-number"></span>\n        </li>\n      {{/each}}\n    </ul>\n  </div>\n';searchui.registerHandlebarsHelper("buildCategoryTag",searchSettingsCommon.handlebarsHelpers.buildCategoryTag),searchui.registerHandlebarsHelper("trimTitle",searchSettingsCommon.handlebarsHelpers.trimTitle),searchui.searchField({containerId:"searchfield",placeholder:"Search",icon:!1,button:"Search",searchAsYouType:!0,ignoreAutocomplete:!0,minLengthToShowResults:2}),searchui.filters({containerId:"tabs",type:AddSearchUI.FILTER_TYPE.TABS,template:FILTERS_TABS_TEMPLATE,clearOtherFilters:!0,options:searchSettingsCommon.filters}),searchui.searchResults({containerId:"searchresults",template:SEARCHRESULTS_TEMPLATE,renderCompleteCallback:function(){resultsForFilters(),setTimeout(updateLoadMore,100),document.querySelectorAll(".p-search-filters-list .c-tags__filter").forEach(e=>{e.addEventListener("click",()=>{filterChangeTrigger=!0})})}}),searchui.loadMore({containerId:"loadmore",type:AddSearchUI.LOAD_MORE_TYPE.BUTTON,template:LOADMORE_TEMPLATE}),searchui.start();const inputElem=document.querySelector(".search-field-wrapper input");function typing(){keyboardTimer&&clearTimeout(keyboardTimer),keyboardTimer=setTimeout(()=>{filterChangeTrigger=!1},keyboardThreshold)}function resultsForFilters(){const e=document.querySelector(".search-field-wrapper input");e&&e.value?runSearchForFilters(Object.keys(searchSettingsCommon.filters),e.value):resetFilterButtons()}function runSearchForFilters(e,t){if(e&&e.length>0){const r=e.shift();filterChangeTrigger&&filtersCache&&filtersCache[r]?(updateFilterButton(r,filtersCache[r]),runSearchForFilters(e,t)):(backgroundClient.setFilterObject(searchSettingsCommon.filters[r].filter),backgroundClient.search(t,s=>{filtersCache[r]=s.total_hits,updateFilterButton(r,s.total_hits),runSearchForFilters(e,t)}))}else filterChangeTrigger=!1}function updateFilterButton(e,t){document.querySelector(`#searchfilter-${e} .searchfilter-number`).textContent=t>0?`(${t})`:""}function resetFilterButtons(){document.querySelectorAll(".searchfilter-number").forEach(e=>e.textContent="")}function updateLoadMore(){const e=document.getElementById("numberofresults"),t=document.querySelectorAll(".p-search-result").length;e&&(e.textContent=t)}inputElem&&(inputElem.addEventListener("keyup",typing),resultsForFilters());